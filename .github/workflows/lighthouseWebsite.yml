name: Lighthouse Github Pages
on:
# Trigger only when the build workflow succeeded on master
  workflow_run:
    workflows: ["Deploy on Github Pages"]
    branches: [master]
    types:
      - completed
# Trigger job on demand
  repository_dispatch:
    types: [lighthouse-github-pages]
jobs:
  lighthouse:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
    - name: Lighthouse
      uses: foo-software/lighthouse-check-action@master
      with:
        urls: 'https://jy95.github.io/?/games'